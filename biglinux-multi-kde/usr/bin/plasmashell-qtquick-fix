#!/bin/bash
#
# Add Exec=QT_QUICK_BACKEND= in all .desktop files to solve bug in Exec=QT_QUICK_BACKEND=software


OIFS=$IFS
IFS=$'\n'

for i  in $(LC_ALL=C grep -R "^Exec" /usr/share/applications/ /var/lib/flatpak/exports/share/applications/ /var/lib/snapd/desktop/applications/ | grep -v 'QT_QUICK_BACKEND\|Binary\|org.kde.discover\|screensavers' | cut -f1 -d: | uniq); do

    echo "testando isso aqui"
    sed -i 's|^Exec=|Exec=QT_QUICK_BACKEND= |g'  "$i"
done

IFS=$OIFS
